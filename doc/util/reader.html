<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Avocado API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic" />
  <script>
    var src = 'util/reader.html';
    var relative = '../';
    document.write('<link rel="stylesheet" href="'+relative+'assets/style.css" />');
    document.write('<link rel="stylesheet" href="'+relative+'assets/sh.css" />');
  </script>

</head>
<body class="alt apidoc" id="api-section-documentation">

  <style>  
    #column1.interior {
      overflow-wrap: break-word;
    }
  
    .on {
      color: #43853d !important;
      border-radius: 0;
      border-bottom: 1px solid #43853d;
      background: none;
    }

  </style>
  
  <div id="content" class="clearfix">

    <div id="column2" class="interior">

      <!--div id="intro" class="interior">
        <a href="/" id="home2" title="Go back to the home page">
          AvocadoJS
        </a>
      </div-->

      <h1 id="-avocadojs-">
			<a href="http://avocadojs.org/"><code>AvocadoJS</code></a>
			<span><a class="mark" href="#-avocadojs-" id="-avocadojs-">#</a></span>
		</h1><ul>
<li><a href="README.html"><code>About</code></a></li>
<li><a href="https://github.com/louis-tru/avocado-tools"><code>Tools</code></a></li>
<li><a href="https://github.com/louis-tru/avocado-demo"><code>Examples</code></a></li>
</ul>
<h1 id="util">
			Util
			<span><a class="mark" href="#util" id="util">#</a></span>
		</h1><ul>
<li><a href="util/util.html"><code>lib://util</code></a></li>
<li><a href="util/buffer.html"><code>lib://util/buffer</code></a></li>
<li><a href="util/event.html"><code>lib://util/event</code></a></li>
<li><a href="util/fs.html"><code>lib://util/fs</code></a></li>
<li><a href="util/file_stat.html"><code>lib://util/fs and Stat</code></a></li>
<li><a href="util/http.html"><code>lib://util/http</code></a></li>
<li><a href="util/keys.html"><code>lib://util/keys</code></a></li>
<li><a href="util/path.html"><code>lib://util/path</code></a></li>
<li><a href="util/reader.html"><code>lib://util/reader</code></a></li>
<li><a href="util/storage.html"><code>lib://util/storage</code></a></li>
<li><a href="util/sys.html"><code>lib://util/sys</code></a></li>
<li><a href="util/global.html"><code>Global</code></a></li>
<li><a href="util/native_types.html"><code>Native Types</code></a></li>
</ul>
<h1 id="gui">
			GUI
			<span><a class="mark" href="#gui" id="gui">#</a></span>
		</h1><ul>
<li><a href="gui/gui.html"><code>lib://gui</code></a></li>
<li><a href="gui/action.html"><code>lib://gui/action</code></a></li>
<li><a href="gui/app.html"><code>lib://gui/app</code></a></li>
<li><a href="gui/css.html"><code>lib://gui/css</code></a></li>
<li><a href="gui/ctr.html"><code>lib://gui/ctr</code></a></li>
<li><a href="gui/display_port.html"><code>lib://gui/display_port</code></a></li>
<li><a href="gui/event.html"><code>lib://gui/event</code></a></li>
<li><a href="gui/font.html"><code>lib://gui/font</code></a></li>
<li><a href="gui/media.html"><code>lib://gui/media</code></a></li>
<li><a href="gui/value.html"><code>lib://gui/value</code></a></li>
</ul>


    </div>
    
    <div id="column1" data-id="documentation" class="interior">
      <header>
        <h1>AvocadoJS v0.1.0 Documentation</h1>
        <div id="gtoc">
          <p>
            <a href="/doc" id="index">Index</a> |
            <a href="/" id="home">Home</a>
          </p>
        </div>
        <hr>
      </header>

      <div id="toc">
        <h2>Table of Contents</h2>
        <ul>
<li>
<span><a href="#lib-util-reader">lib://util/reader</a></span>
<ul>
<li>
<span><a href="#read_stream-path-cb-">read_stream(path[,cb])</a></span>
</li>
<li>
<span><a href="#read-path-cb-">read(path[,cb])</a></span>
</li>
<li>
<span><a href="#read_sync-path-">read_sync(path)</a></span>
</li>
<li>
<span><a href="#readdir_sync-path-">readdir_sync(path)</a></span>
</li>
<li>
<span><a href="#exists_sync-path-">exists_sync(path)</a></span>
</li>
<li>
<span><a href="#exists_file_sync-path-">exists_file_sync(path)</a></span>
</li>
<li>
<span><a href="#exists_dir_sync-path-">exists_dir_sync(path)</a></span>
</li>
<li>
<span><a href="#abort-id-">abort(id)</a></span>
</li>
</ul>
</li>
</ul>
      </div>

      <div id="apicontent">
        <h1 id="lib-util-reader">
			<code>lib://util/reader</code>
			<span><a class="mark" href="#lib-util-reader" id="lib-util-reader">#</a></span>
		</h1><p>这里提供的方法可以针对不协议的uri路径进行基本的读取操作</p>
<p>现在支持的路径类型：</p>
<ul>
<li><p><code>http://</code> or <code>https://</code> - 可使用同步或异步方式进行读取,但不能读取目录或测试存在, 
<code>readdir_sync()</code>返回空数组而<code>exists_sync()</code>永远返回<code>false</code>。</p>
</li>
<li><p><code>file://</code> 本地文件路径。<code>/var/data</code> or <code>var/data</code> 都可做为本地路径，并不会出错。</p>
</li>
<li><p><code>zip://</code>    这是<code>zip</code>包内路径的一种表示方法，<code>zip:///var/data/test.zip@a.txt</code> 
这个路径表示<code>zip:///var/data/test.zip</code>中的<code>a.txt</code>文件。注意这个路径一定要存在于本地文件系统中</p>
</li>
<li><p><code>lib://</code>     注册的<code>library</code>当使用这种路径时,会先查询当前注册的<code>librarys</code>
并将路径转换为基本路径进行读取，如果不能查找到目标<code>library</code>读取会失败。</p>
</li>
</ul>
<h2 id="read_stream-path-cb-">
			read_stream(path[,cb])
			<span><a class="mark" href="#read_stream-path-cb-" id="read_stream-path-cb-">#</a></span>
		</h2><p>异步读取文件流，并返回中止<code>id</code>与<a href="../util/fs.html#read_stream-path-cb-"><code>fs.read_stream</code></a>功能相同，不同之处在于这个方法可支持不同的协议</p>
<p>通过中止<code>id</code>可强制取消当前的读取任务</p>
<p>成功后通过回调返回<a href="../util/fs.html#object-streamdata"><code>StreamData</code></a>类型数据</p>
<p>Callback: <code>cb(data)</code> (data:<a href="../util/fs.html#object-streamdata"><code>StreamData</code></a>)</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}    要读取的文件路径</li>
<li>@arg <code>[cb]</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a>}</li>
<li>@ret {<a href="../util/native_types.html#uint"><code>uint</code></a>} return abort <code>id</code></li>
</ul>
<h2 id="read-path-cb-">
			read(path[,cb])
			<span><a class="mark" href="#read-path-cb-" id="read-path-cb-">#</a></span>
		</h2><p>异步读取文件，并返回中止<code>id</code>,通过中止<code>id</code>可强制取消当前的读取任务</p>
<p>成功后通过回调返回<a href="../util/buffer.html#class-buffer"><code>Buffer</code></a>数据</p>
<p>Callback: <code>cb(data)</code> (data:<a href="../util/buffer.html#class-buffer"><code>Buffer</code></a>)</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}        </li>
<li>@arg <code>[cb]</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a>}</li>
<li>@ret {<a href="../util/native_types.html#uint"><code>uint</code></a>} return abort <code>id</code></li>
</ul>
<p>Example:</p>
<pre><code class="undefinedjs">// async read file stream 
reader.read_stream(&#39;http://www.baidu.com&#39;, function(d){ }));
reader.read_stream(&#39;file:///var/data/test.txt&#39;, function(d){ }));
reader.read_stream(&#39;zip:///var/data/test.zip@aa.txt&#39;, function(d){ 
    /*Success*/ 
    console.log(d.data.length, d.complete);
}));
reader.read_stream(&#39;lib:///util/util.js&#39;, function(d){ }));

// async read file
reader.read(&#39;http://www.baidu.com&#39;, function(d){ }));
reader.read(&#39;file:///var/data/test.txt&#39;, function(d){ }));
reader.read(&#39;zip:///var/data/test.zip@aa.txt&#39;, function(d){ }));
reader.read(&#39;lib:///util/util.js&#39;, function(d){ 
    /*Success*/ 
    console.log(d.length);
}.catch(e=&gt;{ /*Fail*/ }));
</code></pre>
<h2 id="read_sync-path-">
			read_sync(path)
			<span><a class="mark" href="#read_sync-path-" id="read_sync-path-">#</a></span>
		</h2><p>同步读取文件,成功返回文件<code>Buffer</code>失败会抛出异常</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="../util/buffer.html#class-buffer"><code>Buffer</code></a>} return <code>Buffer</code></li>
</ul>
<h2 id="readdir_sync-path-">
			readdir_sync(path)
			<span><a class="mark" href="#readdir_sync-path-" id="readdir_sync-path-">#</a></span>
		</h2><p>读取目录列表信息，返回<a href="../util/file_stat.html#class-dirent"><code>Dirent</code></a>的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></p>
<p>这个方法不能处理<code>http://</code>与<code>https://</code>类型的路径,如果传入这种路径立即返回一个空数组<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></p>
<p>这个方法也不会抛出异常，如果不能读取路径，只会返回空数组<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a>}</li>
</ul>
<h2 id="exists_sync-path-">
			exists_sync(path)
			<span><a class="mark" href="#exists_sync-path-" id="exists_sync-path-">#</a></span>
		</h2><p>测试文件或目录是否存在，如果文件存在会返回<code>false</code></p>
<p>这个方法不能处理<code>http://</code>与<code>https://</code>类型的路径,如果传入这种路径立即返回<code>false</code></p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="../util/native_types.html#bool"><code>bool</code></a>}</li>
</ul>
<h2 id="exists_file_sync-path-">
			exists_file_sync(path)
			<span><a class="mark" href="#exists_file_sync-path-" id="exists_file_sync-path-">#</a></span>
		</h2><p>测试文件是否存在</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="../util/native_types.html#bool"><code>bool</code></a>}</li>
</ul>
<h2 id="exists_dir_sync-path-">
			exists_dir_sync(path)
			<span><a class="mark" href="#exists_dir_sync-path-" id="exists_dir_sync-path-">#</a></span>
		</h2><p>测试目录是否存在</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="../util/native_types.html#bool"><code>bool</code></a>}</li>
</ul>
<h2 id="abort-id-">
			abort(id)
			<span><a class="mark" href="#abort-id-" id="abort-id-">#</a></span>
		</h2><p>通过<code>id</code>中止异步任务，与<a href="../util/fs.html#abort-id-"><code>fs.abort</code></a>功能相同</p>
<ul>
<li>@arg id {<a href="../util/native_types.html#uint"><code>uint</code></a>} 传入的中止<code>id</code></li>
</ul>

      </div>

    </div>

  </div>

  <script>
    document.write('<script src="'+relative+'assets/sh_main.js"><\/script>');
    document.write('<script src="'+relative+'assets/sh_javascript.min.js"><\/script>');
  </script>

  <script>
    highlight(undefined, undefined, 'pre');
    
    var column2 = document.getElementById('column2');
    var a = column2.querySelector('li > a[href="' + src + '"]')
    if ( a ) {
      a.className += ' on';
    }
    if ( relative ) {
      column2.querySelectorAll('li > a').forEach(function(a) {
        var href = a.getAttribute('href');
        if ( !href.match(/^(\/|https?:\/\/)/) ) {
          a.setAttribute('href', relative + href);
        }
      });
    }
    document.getElementById('index').href = relative + '.';
    document.getElementById('home').href = relative + '..';
    // document.getElementById('home2').href = relative + '..';
  </script>

</body>
</html>