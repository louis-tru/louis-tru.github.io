<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Ngui API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic" />
  <script>
    var src = 'reader.html';
    var relative = '';
    document.write('<link rel="stylesheet" href="'+relative+'assets/style.css" />');
    document.write('<link rel="stylesheet" href="'+relative+'assets/sh.css" />');
  </script>

</head>
<body class="alt apidoc" id="api-section-documentation">

  <style>  
    #column1.interior {
      overflow-wrap: break-word;
    }
  
    .on {
      color: #43853d !important;
      border-radius: 0;
      border-bottom: 1px solid #43853d;
      background: none;
    }

  </style>
  
  <div id="content" class="clearfix">

    <div id="column2" class="interior">

      <!--div id="intro" class="interior">
        <a href="/" id="home2" title="Go back to the home page">
          NGUI
        </a>
      </div-->

      <h1 id="-ngui-">
			<a href="http://nodegui.org/"><code>Ngui</code></a>
			<span><a class="mark" href="#-ngui-" id="-ngui-">#</a></span>
		</h1><ul>
<li><a href="README.html"><code>About</code></a></li>
<li><a href="https://www.npmjs.com/package/ngui-tools"><code>Tools</code></a></li>
<li><a href="https://github.com/louis-tru/ngui/tree/master/demo"><code>Examples</code></a></li>
</ul>
<h1 id="course">
			Course
			<span><a class="mark" href="#course" id="course">#</a></span>
		</h1><ul>
<li><a href="blog/001.html"><code>Synopsis</code></a></li>
<li><a href="blog/002.html"><code>View and layout</code></a></li>
<li><a href="blog/003-action.html"><code>Action</code></a></li>
<li><a href="blog/004-css.html"><code>CSS</code></a></li>
</ul>
<h1 id="modules">
			Modules
			<span><a class="mark" href="#modules" id="modules">#</a></span>
		</h1><ul>
<li><a href="ngui.html"><code>ngui</code></a></li>
<li><a href="pkg.html"><code>pkg</code></a></li>
<li><a href="action.html"><code>ngui/action</code></a></li>
<li><a href="app.html"><code>ngui/app</code></a></li>
<li><a href="css.html"><code>ngui/css</code></a></li>
<li><a href="ctr.html"><code>ngui/ctr</code></a></li>
<li><a href="display_port.html"><code>ngui/display_port</code></a></li>
<li><a href="font.html"><code>ngui/font</code></a></li>
<li><a href="media.html"><code>ngui/media</code></a></li>
<li><a href="value.html"><code>ngui/value</code></a></li>
<li><a href="util.html"><code>ngui/util</code></a></li>
<li><a href="event.html"><code>ngui/event</code></a></li>
<li><a href="fs.html"><code>ngui/fs</code></a></li>
<li><a href="http.html"><code>ngui/http</code></a></li>
<li><a href="keys.html"><code>ngui/keys</code></a></li>
<li><a href="url.html"><code>ngui/url</code></a></li>
<li><a href="reader.html"><code>ngui/reader</code></a></li>
<li><a href="storage.html"><code>ngui/storage</code></a></li>
<li><a href="sys.html"><code>ngui/sys</code></a></li>
<li><a href="native_types.html"><code>Native Types</code></a></li>
</ul>


    </div>
    
    <div id="column1" data-id="documentation" class="interior">
      <header>
        <h1>Ngui v0.2.1 Documentation</h1>
        <div id="gtoc">
          <p>
            <a href="/doc" id="index">Documentation Index</a> |
            <a href="/" id="home">Home</a>
          </p>
        </div>
        <hr>
      </header>

      <div id="toc">
        <h2>Table of Contents</h2>
        <ul>
<li>
<span><a href="#ngui-reader">ngui/reader</a></span>
<ul>
<li>
<span><a href="#object-streamdata">Object: StreamData</a></span>
<ul>
<li>
<span><a href="#streamdata-data">StreamData.data</a></span>
</li>
<li>
<span><a href="#streamdata-complete">StreamData.complete</a></span>
</li>
<li>
<span><a href="#streamdata-size">StreamData.size</a></span>
</li>
<li>
<span><a href="#streamdata-total">StreamData.total</a></span>
</li>
</ul>
<li>
<span><a href="#readstream-path-cb-">readStream(path[,cb])</a></span>
</li>
<li>
<span><a href="#readfile-path-cb-">readFile(path[,cb])</a></span>
</li>
<li>
<span><a href="#readfilesync-path-">readFileSync(path)</a></span>
</li>
<li>
<span><a href="#readdirsync-path-">readdirSync(path)</a></span>
</li>
<li>
<span><a href="#existssync-path-">existsSync(path)</a></span>
</li>
<li>
<span><a href="#isfilesync-path-">isFileSync(path)</a></span>
</li>
<li>
<span><a href="#isdirectorysync-path-">isDirectorySync(path)</a></span>
</li>
<li>
<span><a href="#abort-id-">abort(id)</a></span>
</li>
</ul>
</li>
</ul>
      </div>

      <div id="apicontent">
        <h1 id="ngui-reader">
			<code>ngui/reader</code>
			<span><a class="mark" href="#ngui-reader" id="ngui-reader">#</a></span>
		</h1><p>这里提供的方法可以针对不协议的uri路径进行基本的读取操作</p>
<p>现在支持的路径类型：</p>
<ul>
<li><p><code>http://</code> or <code>https://</code> - 可使用同步或异步方式进行读取,但不能读取目录或测试存在, 
<code>readdirSync()</code>返回空数组而<code>isFileSync()</code>永远返回<code>false</code>。</p>
</li>
<li><p><code>file://</code> 本地文件路径。<code>/var/data</code> or <code>var/data</code> 都可做为本地路径，并不会出错。</p>
</li>
<li><p><code>zip://</code>    这是<code>zip</code>包内路径的一种表示方法，<code>zip:///var/data/test.zip@a.txt</code> 
这个路径表示<code>zip:///var/data/test.zip</code>中的<code>a.txt</code>文件。注意这个路径一定要存在于本地文件系统中</p>
</li>
</ul>
<h2 id="object-streamdata">
			<code>Object: StreamData</code>
			<span><a class="mark" href="#object-streamdata" id="object-streamdata">#</a></span>
		</h2><p>读取文件流时返回的结构类型, 这是个<code>Object</code>类型描述并没有实际存在的构造函数</p>
<h3 id="streamdata-data">
			StreamData.data
			<span><a class="mark" href="#streamdata-data" id="streamdata-data">#</a></span>
		</h3><ul>
<li>{<a href="https://nodejs.org/dist/latest-v8.x/docs/api/buffer.html"><code>Buffer</code></a>} 当前读取到的Buffer数据</li>
</ul>
<h3 id="streamdata-complete">
			StreamData.complete
			<span><a class="mark" href="#streamdata-complete" id="streamdata-complete">#</a></span>
		</h3><ul>
<li>{<a href="native_types.html#bool"><code>bool</code></a>} 读取是否完成</li>
</ul>
<h3 id="streamdata-size">
			StreamData.size
			<span><a class="mark" href="#streamdata-size" id="streamdata-size">#</a></span>
		</h3><ul>
<li>{<a href="native_types.html#uint"><code>uint</code></a>} 已经读取到的数据总量</li>
</ul>
<h3 id="streamdata-total">
			StreamData.total
			<span><a class="mark" href="#streamdata-total" id="streamdata-total">#</a></span>
		</h3><ul>
<li>{<a href="native_types.html#uint"><code>uint</code></a>} 全部数据源的总大小,有可能是<code>0</code>,为<code>0</code>表示数据大小未知,可能为无限大比如为视频直播数据流</li>
</ul>
<h2 id="readstream-path-cb-">
			readStream(path[,cb])
			<span><a class="mark" href="#readstream-path-cb-" id="readstream-path-cb-">#</a></span>
		</h2><p>异步读取文件流，并返回中止<code>id</code></p>
<p>通过中止<code>id</code>可强制取消当前的读取任务</p>
<p>成功后通过回调返回<a href="reader.html#object-streamdata"><code>StreamData</code></a>类型数据</p>
<p>Callback: <code>cb(data)</code> (data:<a href="reader.html#object-streamdata"><code>StreamData</code></a>)</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}    要读取的文件路径</li>
<li>@arg <code>[cb]</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a>}</li>
<li>@ret {<a href="native_types.html#uint"><code>uint</code></a>} return abort <code>id</code></li>
</ul>
<h2 id="readfile-path-cb-">
			readFile(path[,cb])
			<span><a class="mark" href="#readfile-path-cb-" id="readfile-path-cb-">#</a></span>
		</h2><p>异步读取文件，并返回中止<code>id</code>,通过中止<code>id</code>可强制取消当前的读取任务</p>
<p>成功后通过回调返回<a href="https://nodejs.org/dist/latest-v8.x/docs/api/buffer.html"><code>Buffer</code></a>数据</p>
<p>Callback: <code>cb(data)</code> (data:<a href="https://nodejs.org/dist/latest-v8.x/docs/api/buffer.html"><code>Buffer</code></a>)</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}        </li>
<li>@arg <code>[cb]</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a>}</li>
<li>@ret {<a href="native_types.html#uint"><code>uint</code></a>} return abort <code>id</code></li>
</ul>
<p>Example:</p>
<pre><code class="undefinedjs">// async read file stream 
reader.readStream(&#39;http://www.baidu.com&#39;, function(d){ }));
reader.readStream(&#39;file:///var/data/test.txt&#39;, function(d){ }));
reader.readStream(&#39;zip:///var/data/test.zip@aa.txt&#39;, function(d){ 
    /*Success*/ 
    console.log(d.data.length, d.complete);
}));

// async read file
reader.read(&#39;http://www.baidu.com&#39;, function(d){ }));
reader.read(&#39;file:///var/data/test.txt&#39;, function(d){ }));
reader.read(&#39;zip:///var/data/test.zip@aa.txt&#39;, function(d){ 
    /*Success*/ 
    console.log(d.length);
}.catch(e=&gt;{ /*Fail*/ }));
</code></pre>
<h2 id="readfilesync-path-">
			readFileSync(path)
			<span><a class="mark" href="#readfilesync-path-" id="readfilesync-path-">#</a></span>
		</h2><p>同步读取文件,成功返回文件<code>Buffer</code>失败会抛出异常</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="https://nodejs.org/dist/latest-v8.x/docs/api/buffer.html"><code>Buffer</code></a>} return <code>Buffer</code></li>
</ul>
<h2 id="readdirsync-path-">
			readdirSync(path)
			<span><a class="mark" href="#readdirsync-path-" id="readdirsync-path-">#</a></span>
		</h2><p>读取目录列表信息，返回<a href="fs.html#object-dirent"><code>Dirent</code></a>的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></p>
<p>这个方法不能处理<code>http://</code>与<code>https://</code>类型的路径,如果传入这种路径立即返回一个空数组<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></p>
<p>这个方法也不会抛出异常，如果不能读取路径，只会返回空数组<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a></p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a>}</li>
</ul>
<h2 id="existssync-path-">
			existsSync(path)
			<span><a class="mark" href="#existssync-path-" id="existssync-path-">#</a></span>
		</h2><p>测试文件或目录是否存在，如果文件存在会返回<code>false</code></p>
<p>这个方法不能处理<code>http://</code>与<code>https://</code>类型的路径,如果传入这种路径立即返回<code>false</code></p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="native_types.html#bool"><code>bool</code></a>}</li>
</ul>
<h2 id="isfilesync-path-">
			isFileSync(path)
			<span><a class="mark" href="#isfilesync-path-" id="isfilesync-path-">#</a></span>
		</h2><p>测试文件是否存在</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="native_types.html#bool"><code>bool</code></a>}</li>
</ul>
<h2 id="isdirectorysync-path-">
			isDirectorySync(path)
			<span><a class="mark" href="#isdirectorysync-path-" id="isdirectorysync-path-">#</a></span>
		</h2><p>测试目录是否存在</p>
<ul>
<li>@arg <code>path</code> {<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a>}</li>
<li>@ret {<a href="native_types.html#bool"><code>bool</code></a>}</li>
</ul>
<h2 id="abort-id-">
			abort(id)
			<span><a class="mark" href="#abort-id-" id="abort-id-">#</a></span>
		</h2><p>通过<code>id</code>中止异步任务，与<a href="fs.html#abort-id-"><code>fs.abort</code></a>功能相同</p>
<ul>
<li>@arg id {<a href="native_types.html#uint"><code>uint</code></a>} 传入的中止<code>id</code></li>
</ul>

      </div>

    </div>

  </div>

  <script>
    document.write('<script src="'+relative+'assets/sh_main.js"><\/script>');
    document.write('<script src="'+relative+'assets/sh_javascript.min.js"><\/script>');
  </script>

  <script>
    highlight(undefined, undefined, 'pre');
    
    var column2 = document.getElementById('column2');
    var a = column2.querySelector('li > a[href="' + src + '"]')
    if ( a ) {
      a.className += ' on';
    }
    if ( relative ) {
      column2.querySelectorAll('li > a').forEach(function(a) {
        var href = a.getAttribute('href');
        if ( !href.match(/^(\/|https?:\/\/)/) ) {
          a.setAttribute('href', relative + href);
        }
      });
    }
    document.getElementById('index').href = relative + '.';
    document.getElementById('home').href = relative + '..';
    // document.getElementById('home2').href = relative + '..';
  </script>

</body>
</html>